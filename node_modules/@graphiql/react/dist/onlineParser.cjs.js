"use strict";var R=Object.defineProperty;var u=(e,n)=>R(e,"name",{value:n,configurable:!0});var d=require("./index.cjs.js"),m=require("graphql");function A(e={eatWhitespace:n=>n.eatWhile(d.isIgnored),lexRules:d.LexRules,parseRules:d.ParseRules,editorConfig:{}}){return{startState(){const n={level:0,step:0,name:null,kind:null,type:null,rule:null,needsSeparator:!1,prevState:null};return f(e.parseRules,n,m.Kind.DOCUMENT),n},token(n,l){return L(n,l,e)}}}u(A,"onlineParser");function L(e,n,l){var i;if(n.inBlockstring)return e.match(/.*"""/)?(n.inBlockstring=!1,"string"):(e.skipToEnd(),"string");const{lexRules:p,parseRules:g,eatWhitespace:k,editorConfig:c}=l;if(n.rule&&n.rule.length===0?S(n):n.needsAdvance&&(n.needsAdvance=!1,a(n,!0)),e.sol()){const r=(c==null?void 0:c.tabSize)||2;n.indentLevel=Math.floor(e.indentation()/r)}if(k(e))return"ws";const o=w(p,e);if(!o)return e.match(/\S+/)||e.match(/\s/),f(v,n,"Invalid"),"invalidchar";if(o.kind==="Comment")return f(v,n,"Comment"),"comment";const y=h({},n);if(o.kind==="Punctuation"){if(/^[{([]/.test(o.value))n.indentLevel!==void 0&&(n.levels=(n.levels||[]).concat(n.indentLevel+1));else if(/^[})\]]/.test(o.value)){const r=n.levels=(n.levels||[]).slice(0,-1);n.indentLevel&&r.length>0&&r[r.length-1]<n.indentLevel&&(n.indentLevel=r[r.length-1])}}for(;n.rule;){let r=typeof n.rule=="function"?n.step===0?n.rule(o,e):null:n.rule[n.step];if(n.needsSeparator&&(r=r==null?void 0:r.separator),r){if(r.ofRule&&(r=r.ofRule),typeof r=="string"){f(g,n,r);continue}if(!((i=r.match)===null||i===void 0)&&i.call(r,o))return r.update&&r.update(n,o),o.kind==="Punctuation"?a(n,!0):n.needsAdvance=!0,r.style}t(n)}return h(n,y),f(v,n,"Invalid"),"invalidchar"}u(L,"getToken");function h(e,n){const l=Object.keys(n);for(let i=0;i<l.length;i++)e[l[i]]=n[l[i]];return e}u(h,"assign");const v={Invalid:[],Comment:[]};function f(e,n,l){if(!e[l])throw new TypeError("Unknown rule: "+l);n.prevState=Object.assign({},n),n.kind=l,n.name=null,n.type=null,n.rule=e[l],n.step=0,n.needsSeparator=!1}u(f,"pushRule");function S(e){!e.prevState||(e.kind=e.prevState.kind,e.name=e.prevState.name,e.type=e.prevState.type,e.rule=e.prevState.rule,e.step=e.prevState.step,e.needsSeparator=e.prevState.needsSeparator,e.prevState=e.prevState.prevState)}u(S,"popRule");function a(e,n){var l;if(s(e)&&e.rule){const i=e.rule[e.step];if(i.separator){const p=i.separator;if(e.needsSeparator=!e.needsSeparator,!e.needsSeparator&&p.ofRule)return}if(n)return}for(e.needsSeparator=!1,e.step++;e.rule&&!(Array.isArray(e.rule)&&e.step<e.rule.length);)S(e),e.rule&&(s(e)?!((l=e.rule)===null||l===void 0)&&l[e.step].separator&&(e.needsSeparator=!e.needsSeparator):(e.needsSeparator=!1,e.step++))}u(a,"advanceRule");function s(e){const n=Array.isArray(e.rule)&&typeof e.rule[e.step]!="string"&&e.rule[e.step];return n&&n.isList}u(s,"isList");function t(e){for(;e.rule&&!(Array.isArray(e.rule)&&e.rule[e.step].ofRule);)S(e);e.rule&&a(e,!1)}u(t,"unsuccessful");function w(e,n){const l=Object.keys(e);for(let i=0;i<l.length;i++){const p=n.match(e[l[i]]);if(p&&p instanceof Array)return{kind:l[i],value:p[0]}}}u(w,"lex");exports.onlineParser=A;
